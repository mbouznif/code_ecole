<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chasse au Tr√©sor</title>
    <style>
        body {
            background-image: url('https://st4.depositphotos.com/1000651/22320/i/450/depositphotos_223206466-stock-photo-old-grunge-blank-paper-sheet.jpg');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            font-family: 'Trebuchet MS', sans-serif;
            text-align: center;
            padding-top: 50px;
            color: white;
        }
        h1 {
            color: #d4af37;
            font-size: 3em;
            margin-bottom: 20px;
            position: relative; /* Pour le conteneur */
            display: inline-block; /* Permet de centrer et de donner une taille */
            padding: 10px; /* Pour le contraste avec le trait noir */
            border: 2px solid black; /* Trait noir autour du texte */
            border-radius: 10px; /* Arrondir les bords si souhait√© */
            background-color: rgba(0, 0, 0, 0.5); /* Fond semi-transparent pour contraste */
        }
        .code-input {
            width: 60px;
            height: 60px;
            font-size: 2em;
            text-align: center;
            margin: 5px;
            border: 3px solid #d4af37;
            border-radius: 10px;
            display: inline-block;
        }
        #submit-btn {
            margin-top: 20px;
            padding: 15px 30px;
            font-size: 1.5em;
            background-color: #d4af37;
            color: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            display: inline-block; /* Ajout√© pour centrer */
        }
        #success-animation {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0);
            width: 300px;
            animation: zoomAnimation 2s forwards;
            z-index: 1000;
        }
        #success-animation img {
            width: 100%;
        }
        .code-container {
            margin-bottom: 20px;
            display: inline-block;
        }
        .message {
            color: #4CAF50;
            font-size: 2em;
        }

        @keyframes zoomAnimation {
            0% {
                transform: translate(-50%, -50%) scale(0);
            }
            50% {
                transform: translate(-50%, -50%) scale(1);
            }
            100% {
                transform: translate(-50%, -50%) scale(3);
            }
        }

        #error-message {
            display: none;
            background-color: rgba(255, 0, 0, 0.8);
            padding: 20px;
            margin-top: 20px;
            border-radius: 10px;
            color: white;
            font-size: 1.5em;
        }
        #retry-btn {
            margin-top: 10px;
            padding: 10px 20px;
            font-size: 1em;
            background-color: #d4af37;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }

        #settings-btn {
            position: fixed;
            top: 20px;
            right: 20px;
            width: 40px;
            height: 40px;
            background-color: #d4af37;
            border: none;
            border-radius: 50%;
            cursor: pointer;
            font-size: 20px;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        #settings-form {
            display: none;
            margin-top: 20px;
            text-align: center;
        }

        @media (max-width: 600px) {
            h1 {
                font-size: 2em;
            }
            .code-input {
                width: 40px;
                height: 40px;
                font-size: 1.5em;
            }
            #submit-btn {
                padding: 10px 20px;
                font-size: 1.2em;
            }
        }
    </style>
</head>
<body>

    <h1 id="code-header">Entrez le Code Secret !</h1>
    
    <div class="code-container" id="code-container">
        <input type="text" id="digit-1" maxlength="1" class="code-input">
        <input type="text" id="digit-2" maxlength="1" class="code-input">
        <input type="text" id="digit-3" maxlength="1" class="code-input">
        <input type="text" id="digit-4" maxlength="1" class="code-input">
        <input type="text" id="digit-5" maxlength="1" class="code-input">
        <input type="text" id="digit-6" maxlength="1" class="code-input">
    </div>

    <div>
        <button id="submit-btn">Valider</button>
    </div>

    <div id="success-animation">
        <div class="message">üéâ Bravo !üéâ</div>
        <img src="https://media.istockphoto.com/id/1160778039/fr/photo/coffre-au-tr%C3%A9sor-ouvrez-le-tronc-antique-avec-les-lumi%C3%A8res-magiques-brillantes-dans-lobscurit%C3%A9.jpg?s=612x612&w=0&k=20&c=5HE_AxWLvmN2VZLm5S9eCPFISL0WH3CU6ZqALi53jD4=" alt="Tr√©sor">        
    </div>

    <div id="error-message">
        Ce n'est pas le bon code, essaie encore !
        <br>
        <button id="retry-btn">R√©essayer</button>
    </div>

    <button id="settings-btn">‚öôÔ∏è</button>

    <div id="settings-form">
        <h2>Configurer le Code Secret</h2>
        <input type="text" id="new-code" maxlength="6" placeholder="Nouveau code (6 chiffres)">
        <button id="set-code-btn">Valider</button>
    </div>

    <script>
        let secretCode = ["1", "2", "3", "4", "5", "6"];
        const submitBtn = document.getElementById('submit-btn');
        const successAnimation = document.getElementById('success-animation');
        const errorMessage = document.getElementById('error-message');
        const retryBtn = document.getElementById('retry-btn');
        const settingsBtn = document.getElementById('settings-btn');
        const settingsForm = document.getElementById('settings-form');
        const setCodeBtn = document.getElementById('set-code-btn');
        const newCodeInput = document.getElementById('new-code');

        // Fonction de validation du code
        submitBtn.addEventListener('click', () => {
            let enteredCode = [
                document.getElementById('digit-1').value,
                document.getElementById('digit-2').value,
                document.getElementById('digit-3').value,
                document.getElementById('digit-4').value,
                document.getElementById('digit-5').value,
                document.getElementById('digit-6').value
            ];

            // Comparer avec le code secret
            if (JSON.stringify(enteredCode) === JSON.stringify(secretCode)) {
                document.getElementById('code-header').style.display = 'none';
                document.getElementById('code-container').style.display = 'none';
                submitBtn.style.display = 'none';

                successAnimation.style.display = 'block'; 
                errorMessage.style.display = 'none';

                // Lancer l'animation
                successAnimation.style.transform = 'translate(-50%, -50%) scale(1)';

                // Lancer l'√©v√©nement pour revenir √† l'√©cran de saisie apr√®s l'animation
                setTimeout(() => {
                    document.addEventListener('click', resetGameOnce);
                }, 2000); // D√©lai de 2 secondes (ajustez selon la dur√©e de l'animation)
            } else {
                errorMessage.style.display = 'block';
            }
        });

        // Fonction pour r√©essayer et r√©initialiser les champs
        retryBtn.addEventListener('click', () => {
            errorMessage.style.display = 'none';
            resetFields();
        });

        // Fonction pour r√©initialiser les champs et l'√©tat du jeu
        function resetFields() {
            document.getElementById('digit-1').value = '';
            document.getElementById('digit-2').value = '';
            document.getElementById('digit-3').value = '';
            document.getElementById('digit-4').value = '';
            document.getElementById('digit-5').value = '';
            document.getElementById('digit-6').value = '';
            document.getElementById('digit-1').focus();
            document.getElementById('code-header').style.display = 'block'; // Afficher l'en-t√™te
            document.getElementById('code-container').style.display = 'inline-block'; // Rendre visible le conteneur
            submitBtn.style.display = 'inline-block'; // Rendre visible le bouton
            successAnimation.style.display = 'none'; // Cacher l'animation de succ√®s
        }

        // Ouvrir/fermer les param√®tres
        settingsBtn.addEventListener('click', () => {
            settingsForm.style.display = settingsForm.style.display === 'none' ? 'block' : 'none';
        });

        // Mise √† jour du code secret
        setCodeBtn.addEventListener('click', () => {
            let newCode = newCodeInput.value.split('');
            if (newCode.length === 6 && newCode.every(digit => /^[0-9]$/.test(digit))) {
                secretCode = newCode;
                newCodeInput.value = '';
                settingsForm.style.display = 'none';
                alert('Le code secret a √©t√© mis √† jour !');
            } else {
                alert('Veuillez entrer un code valide de 6 chiffres.');
            }
        });

        // Focus automatique sur la prochaine case quand un chiffre est entr√©
        document.querySelectorAll('.code-input').forEach((input, index, inputs) => {
            input.addEventListener('input', () => {
                if (input.value.length === 1 && inputs[index + 1]) {
                    inputs[index + 1].focus();
                }
            });
        });

        // Fonction pour r√©initialiser le jeu au clic
        function resetGameOnce() {
            resetFields();
            document.removeEventListener('click', resetGameOnce); // Retirer l'√©v√©nement pour √©viter les clics multiples
        }
    </script>

</body>
</html>
